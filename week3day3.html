<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Week 3 (DAY-3)</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #fdfdfd;
      max-width: 900px;
      margin: auto;
      color: #333;
      line-height: 1.6;
      padding: 20px;
    }
    h1, h2, h3 {
      color: #2c3e50;
      text-align: left;
    }
    h2 {
      border-bottom: 2px solid #ccc;
      padding-bottom: 5px;
    }
    pre {
      background-color: #f4f4f4;
      padding: 10px;
      border-left: 4px solid #3498db;
      overflow-x: auto;
    }
    ul {
      line-height: 1.6;
    }
    .concept-box {
      background-color: #e0f7fa;
      border-left: 4px solid #00796b;
      padding: 10px 20px;
      margin: 20px 0;
    }
  </style>
</head>
<body>
  <h1>Week 3 (DAY-3)</h1>
  <h2>Spatial & Geotechnical Data Analysis in R</h2>

  <div class="concept-box">
    <strong>Concepts Covered:</strong><br>
    Spatial and Geotechnical Data, sf and leaflet, Borehole Visualization, Soil Type Interpolation, FEA/CFD Output, Simulation Data Analysis
  </div>

  <h3>1. Spatial & Geotechnical Data in Civil Engineering</h3>
  <p>Spatial and geotechnical data are crucial for site investigation, foundation design, and risk assessment. Spatial data includes coordinates and geographical features, while geotechnical data includes soil properties like density, moisture, and type.</p>

  <h3>2. Mapping with <code>sf</code> or <code>leaflet</code></h3>
  <p><code>sf</code> handles vector spatial data (points, lines, polygons). <code>leaflet</code> creates interactive maps for visualization.</p>
  <pre>
library(sf)
library(leaflet)

soil_map <- st_read("data/soil_shapes.shp")
plot(soil_map["Soil_Type"])

leaflet(soil_map) %>%
  addTiles() %>%
  addPolygons(color = "blue", weight = 1, fillOpacity = 0.5, popup = ~Soil_Type)
  </pre>

  <h3>3. Geotechnical Borehole Data Visualization</h3>
  <pre>
borehole <- data.frame(
  Depth = c(0, 1.5, 3, 5, 7),
  Soil = c("Topsoil", "Clay", "Silty Clay", "Sand", "Gravel")
)

library(ggplot2)
ggplot(borehole, aes(x = "", y = Depth, fill = Soil)) +
  geom_bar(stat = "identity", width = 0.5) +
  scale_y_reverse() +
  labs(title = "Borehole Profile", y = "Depth (m)", x = "") +
  theme_minimal()
  </pre>

  <h3>4. Soil Type Mapping and Interpolation</h3>
  <p>Interpolation estimates soil properties at unmeasured locations using techniques like IDW, Kriging, or Spline.</p>
  <pre>
library(sp)
library(gstat)

coords <- data.frame(x = c(1,2,3,4), y = c(1,2,1,2))
values <- data.frame(soil_ph = c(6.5, 6.8, 7.0, 6.9))
soil_points <- SpatialPointsDataFrame(coords, data = values)

x.range <- seq(0,5,0.1)
y.range <- seq(0,5,0.1)
grid <- expand.grid(x=x.range, y=y.range)
coordinates(grid) <- ~x + y
gridded(grid) <- TRUE

idw_result <- idw(soil_ph ~ 1, soil_points, newdata = grid)
spplot(idw_result, main = "Interpolated Soil pH Map")
  </pre>

  <h3>5. Mechanical Testing & Simulation Data</h3>
  <ul>
    <li>FEA/CFD simulations model stress, deformation, heat flow, and fluid dynamics.</li>
    <li>Simulation outputs are analyzed in R for post-processing and visualization.</li>
  </ul>

  <h3>6. Importing Simulation Output</h3>
  <pre>
fea_data <- read.csv("data/fea_output.csv")
head(fea_data)
  </pre>

  <h3>7. Statistical Summary of Output Variables</h3>
  <pre>
summary(fea_data$Stress)
summary(fea_data$Displacement)

ggplot(fea_data, aes(x = Stress)) +
  geom_histogram(fill = "skyblue", bins = 30) +
  labs(title = "Stress Distribution", x = "Stress (MPa)", y = "Count") +
  theme_minimal()
  </pre>

</body>
</html>
